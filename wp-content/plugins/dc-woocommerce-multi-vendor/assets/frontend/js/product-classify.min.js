!function(t){if("undefined"==typeof wcmp_product_classify_script_data)return!1;var e=function(t){c(t)||t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},c=function(t){return t.is(".processing")||t.parents(".processing").length},a=function(t){t.removeClass("processing").unblock()},r=function(e){t("html, body").animate({scrollTop:e.offset().top-100},1e3)};({$search_by_name_gtin_form:t("form.search-pro-by-name-gtin"),$searched_products_name_gtin_panel:t(".searched-products-name-gtin-panel"),$categories_search_wrapper:t(".categories-search-wrapper"),$searched_categories_results:t("#searched-categories-results"),$product_categories_wrap:t(".wcmp-product-categories-wrap"),$edit_product_form:t("#wcmp-edit-product-form"),init:function(){this.$search_by_name_gtin_form.on("click",".search-product-name-gtin-btn",this.show_products_searched_by_name_gtin.bind(this)),this.$search_by_name_gtin_form.on("keypress",".search-product-name-gtin-keyword",this.bind_show_products_searched_by_name_gtin.bind(this)),this.$categories_search_wrapper.on("input","#search-categories-keyword",this.show_searched_categories),this.$searched_categories_results.on("click",".list-group-item",this.show_product_classify_next_level_from_searched_term),t(document.body).on("click",".wcmp-product-categories-wrap .wcmp-product-cat-level .cat-item a",this.show_product_classify_next_level),t(document.body).on("click",".wcmp-product-categories-wrap .classified-pro-cat-btn",this.set_classified_product_terms),t(document.body).on("click",".searched-result-products-name-gtin .wcmp-create-pro-duplicate-btn",this.create_duplicate_product),this.$searched_products_name_gtin_panel.hide(),this.$searched_categories_results.hide(),this.$product_categories_wrap.append('<div class="wcmp-product-cat-level initial-graphic select-category-graphic">\n                                    <img src="'+wcmp_product_classify_script_data.initial_graphic_url+'" alt="select category">\n                                    <h1>'+wcmp_product_classify_script_data.i18n.select_cat_list+"</h1></div>")},show_products_searched_by_name_gtin:function(){e(t("form.search-pro-by-name-gtin"));var c={action:"wcmp_list_a_product_by_name_or_gtin",keyword:t("input.search-product-name-gtin-keyword").val()};t.ajax({type:"post",url:wcmp_product_classify_script_data.ajax_url,data:c,success:function(e){e.results?t(".searched-result-products-name-gtin").html(e.results):t(".searched-result-products-name-gtin").html("")},complete:function(){t(".searched-products-name-gtin-panel").show(),a(t("form.search-pro-by-name-gtin")),r(t(".searched-products-name-gtin-panel"))}})},bind_show_products_searched_by_name_gtin:function(c){if("13"==(c.keyCode?c.keyCode:c.which)){e(t("form.search-pro-by-name-gtin"));var s={action:"wcmp_list_a_product_by_name_or_gtin",keyword:t("input.search-product-name-gtin-keyword").val()};t.ajax({type:"post",url:wcmp_product_classify_script_data.ajax_url,data:s,success:function(e){e.results?t(".searched-result-products-name-gtin").html(e.results):t(".searched-result-products-name-gtin").html("")},complete:function(){t(".searched-products-name-gtin-panel").show(),a(t("form.search-pro-by-name-gtin")),r(t(".searched-products-name-gtin-panel"))}}),c.preventDefault()}},show_searched_categories:function(){var e={action:"wcmp_product_classify_search_category_level",keyword:t(this).val()};t.ajax({type:"post",url:wcmp_product_classify_script_data.ajax_url,data:e,success:function(e){t("#searched-categories-results").html(""),e.results&&t("#searched-categories-results").html(e.results)},complete:function(){t("#searched-categories-results").show()}})},show_product_classify_next_level:function(c){c.preventDefault(),e(t(".wcmp-product-categories-wrap"));var r=t(this).closest(".wcmp-product-categories-wrap"),s=t(this).parents().find(".wcmp-product-category-hierarchy"),i=t(this).parent().data("term-id"),o=t(this).parent().data("taxonomy"),l=t(this),p={action:"wcmp_product_classify_next_level_list_categories",term_id:i,taxonomy:o,cat_level:l.closest(".wcmp-product-categories").data("cat-level")};t.ajax({type:"post",url:wcmp_product_classify_script_data.ajax_url,data:p,success:function(e){e.hierarchy&&s.html(e.hierarchy),e.html_level&&(l.parents().siblings(".wcmp-product-cat-level."+e.level+"-level-cat").nextAll().remove(),l.parents().siblings(".wcmp-product-cat-level."+e.level+"-level-cat").remove(),e.is_final?(r.append('<div class="wcmp-product-cat-level '+e.level+'-level-cat cat-column select-cat-button-holder" data-level="'+e.level+'" style="width: '+w+'px">'+e.html_level+"</div>"),t(".wcmp-product-cat-level").mCustomScrollbar(),f()):(r.append('<div class="wcmp-product-cat-level '+e.level+'-level-cat cat-column" data-level="'+e.level+'" style="width: '+w+'px">'+e.html_level+"</div>"),t(".wcmp-product-cat-level").mCustomScrollbar(),f()))},complete:function(){a(t(".wcmp-product-categories-wrap")),t(".wcmp-product-categories-wrap .wcmp-product-cat-level.initial-graphic").hide(),l.parent().addClass("active").siblings().removeClass("active")}})},show_product_classify_next_level_from_searched_term:function(){e(t("#searched-categories-results"));var c=t(".wcmp-product-categories-wrap"),s=(t(this).parents().find(".wcmp-product-category-hierarchy"),t(this).data("term-id")),i=t(this).data("taxonomy"),o=(t(this),{action:"show_product_classify_next_level_from_searched_term",term_id:s,taxonomy:i});t.ajax({type:"post",url:wcmp_product_classify_script_data.ajax_url,data:o,success:function(e){e.html_level&&(c.html(""),c.append(e.html_level),t(".wcmp-product-cat-level").mCustomScrollbar(),f(),t(".wcmp-product-categories-wrap .cat-column").css("width",w))},complete:function(){r(t(".wcmp-categories-level-panel")),a(t("#searched-categories-results")),t("#searched-categories-results").hide(),t(".wcmp-product-categories-wrap .wcmp-product-cat-level.initial-graphic").hide()}})},set_classified_product_terms:function(){e(t(this).parents(".wcmp-product-cat-level"));var c=t(this).data("term-id"),r=t(this).data("taxonomy"),s=t(this),i={action:"wcmp_set_classified_product_terms",term_id:c,taxonomy:r};t.ajax({type:"post",url:wcmp_product_classify_script_data.ajax_url,data:i,success:function(t){window.location.href=t.url},complete:function(){a(s.parents(".wcmp-product-cat-level"))}})},create_duplicate_product:function(){e(t(this).parents(".searched-result-products-name-gtin"));var c=t(this).data("product_id"),r=t(this),s={action:"wcmp_create_duplicate_product",nonce:wcmp_product_classify_script_data.types_nonce,product_id:c};t.ajax({type:"post",url:wcmp_product_classify_script_data.ajax_url,data:s,success:function(t){window.location.href=t.redirect_url},complete:function(){a(r.parents(".searched-result-products-name-gtin"))}})}}).init();var s,i,o=t(".wcmp-product-categories-wrap"),l=o.parent(),p=t(window).width(),n=0,d=0,_=!1;p>=1100?s=3:p<=1099&&p>=640?s=2:(s=1,t(".initial-graphic").hide());var u,m,h,w=Math.floor((u=100/s,m=(m=2)||0,m=Math.pow(10,m),Math.floor(u*m)/m*o.width()/100));function f(){(i=o.find(".cat-column").last().attr("data-level"))>s?(n=(i-s)*w,d=l.width()+n,"left"==h?o.css({width:d,"margin-left":-n}):o.css({width:d,"margin-right":-n})):"left"==h?o.css({width:l.width(),"margin-left":0}):o.css({width:l.width(),"margin-right":0})}o.find(".cat-column").css("width",w),h=t("body").hasClass("rtl")?"right":"left",t(".cat-left-scroller").on("click",(function(){n>0&&function(){n-=w,"left"==h?o.css({"margin-left":-n}):o.css({"margin-right":-n});_=!0}()})),t(".cat-right-scroller").on("click",(function(){_&&i>=s&&s*w<d-n-w&&(n+=w,"left"==h?o.css({"margin-left":-n}):o.css({"margin-right":-n}))})),t("#search-list-a-product-btn").on("click",(function(){var e={action:"wcmp_list_a_product_by_name_or_gtin",keyword:t("#search-list-a-product-key").val()};t.post(wcmp_product_classify_script_data.ajax_url,e,(function(e){e.results?t(".wcmp-list-of-products-wrap").html(e.results):t(".wcmp-list-of-products-wrap").html("")}))})),t("body").on("click",".wcmp-list-of-products-wrap ul li a",(function(){e(t(".wcmp-list-of-products-wrap"));var c=t(this).data("product_id"),r={action:"wcmp_create_duplicate_product",nonce:wcmp_product_classify_script_data.types_nonce,product_id:c};t.post(wcmp_product_classify_script_data.ajax_url,r,(function(e){a(t(".wcmp-list-of-products-wrap")),e.status&&(window.location.href=e.redirect_url)}))})),t(document.body).on("click",".wcmp-product-categories-wrap .list-group-item",(function(){e(t(".wcmp-product-categories-wrap"));var c=t(this).closest(".wcmp-product-categories-wrap"),r=t(this).parents().find(".wcmp-product-category-hierarchy"),s=t(this),i={action:"wcmp_product_classify_next_level_list_categories",term_id:s.data("term-id"),taxonomy:s.data("taxonomy"),cat_level:s.parent().data("cat-level")};t.post(wcmp_product_classify_script_data.ajax_url,i,(function(e){a(t(".wcmp-product-categories-wrap")),e.hierarchy&&r.html(e.hierarchy),e.html_level&&(s.parents().siblings(".wcmp-pro-cat-level."+e.level+"-level-cat").remove(),c.append('<div class="wcmp-pro-cat-level '+e.level+'-level-cat col-md-4">'+e.html_level+"</div>")),s.addClass("active").siblings().removeClass("active")}))})),t("#search-by-term-btn").on("click",(function(){var e={action:"wcmp_product_classify_search_category_level",keyword:t("#search-by-term-key").val()};t.post(wcmp_product_classify_script_data.ajax_url,e,(function(e){e.results?t(".wcmp-product-category-search-result-wrap").html(e.results):t(".wcmp-product-category-search-result-wrap").html("")}))}))}(jQuery);