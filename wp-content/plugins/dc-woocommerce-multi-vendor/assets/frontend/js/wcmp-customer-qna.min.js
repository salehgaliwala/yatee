!function(a){var t,n=function(a){r(a)||a.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},r=function(a){return a.is(".processing")||a.parents(".processing").length},o=function(a){a.removeClass("processing").unblock()};a("#cust_question").on("keyup",(function(){var r=a(this).val();clearTimeout(t),t=setTimeout((function(){if(a("#qna-result-msg").html(""),n(a("#cust_qna_form")),r.length>3){var t={action:"wcmp_customer_ask_qna_handler",handler:"search",product_ID:a("#product_ID").val(),keyword:r};a.post(wcmp_customer_qna_js_script_data.ajax_url,t,(function(t){o(a("#cust_qna_form")),1==t.no_data?(a("#qna-result-msg").html(t.message),a("#qna-result-wrap").html(""),0==t.is_user&&(a("#ask-wrap #ask-qna").hide(),a("#ask-wrap .no-answer-lbl").html(t.message)),a("#ask-wrap").show()):a("#qna-result-wrap").html(t.data)}))}else{a("#ask-wrap").hide();t={action:"wcmp_customer_ask_qna_handler",handler:"search",product_ID:a("#product_ID").val(),keyword:""};a.post(wcmp_customer_qna_js_script_data.ajax_url,t,(function(t){o(a("#cust_qna_form")),1==t.no_data?(a("#qna-result-msg").html(t.message),a("#qna-result-wrap").html(""),a("#ask-wrap").show()):(a("#qna-result-wrap").html(t.data),a("#qna-result-wrap .qna-item-wrap").not(".load-more-qna").hide(),a("#qna-result-wrap .qna-item-wrap").slice(0,4).show())}))}}),500)})),a("body").on("click","#ask-qna",(function(){a("#qna-result-msg").html(""),n(a("#cust_qna_form"));var t={action:"wcmp_customer_ask_qna_handler",handler:"submit",customer_qna_data:a("#customerqnaform").serialize()};a.post(wcmp_customer_qna_js_script_data.ajax_url,t,(function(a){0==a.no_data&&(window.location=a.redirect)}))})),a("body").on("click","button.wcmp-add-qna-reply",(function(){var t=a(this).attr("data-key"),n=a("#qna-reply-"+t).val();if(""===n)return!1;var r={action:"wcmp_customer_ask_qna_handler",handler:"answer",reply:n,key:t};a.post(wcmp_customer_qna_js_script_data.ajax_url,r,(function(a){0==a.no_data&&window.location.reload()}))})),a("body").on("click",".wcmp_vendor_question .do_verify",(function(t){t.preventDefault();a(this);var n=a(this).attr("data-verification"),r=a(this).attr("data-question_id"),o=a(this).attr("data-action"),e=a(this).attr("data-product");console.log(r);var s={action:"wcmp_question_verification_approval",question_type:n,question_id:r,data_action:o,product:e,security:wcmp_customer_qna_js_script_data.vendors_nonce};a.post(wcmp_customer_qna_js_script_data.ajax_url,s,(function(a){window.location.reload()}))})),a("body").on("click","button.wcmp-update-qna-answer",(function(){var t=a(this).attr("data-key"),n=a("#qna-answer-"+t).val();if(""===n)return!1;var r={action:"wcmp_customer_ask_qna_handler",handler:"update_answer",answer:n,key:t};a.post(wcmp_customer_qna_js_script_data.ajax_url,r,(function(a){0==a.no_data&&window.location.reload()}))})),a("body").on("click",".qna-vote .give-vote-btn",(function(t){t.preventDefault(),n(a("#cust_qna_form"));var r=a(this).attr("data-vote"),e=a(this).attr("data-ans");if(""===r)return!1;var s={action:"wcmp_customer_ask_qna_handler",handler:"vote_answer",vote:r,ans_ID:e};a.post(wcmp_customer_qna_js_script_data.ajax_url,s,(function(t){o(a("#cust_qna_form")),0==t.no_data&&setTimeout((function(){window.location=t.redirect}),1e3)}))})),a("body").on("click",".non_loggedin",(function(t){t.preventDefault(),a("#qna_user_msg_wrap").simplePopup()})),a(document).ready((function(){a("#qna-result-wrap .qna-item-wrap").not(".load-more-qna").hide(),a("#qna-result-wrap .qna-item-wrap").slice(0,4).show()})),a("body").on("click",".load-more-qna .load-more-btn",(function(t){t.preventDefault(),a("#qna-result-wrap .qna-item-wrap:hidden").slice(0,4).slideDown(),0==a("#qna-result-wrap .qna-item-wrap:hidden").length&&(a("#qna-result-wrap .load-more-qna").fadeOut("slow"),a("#qna-result-wrap .qna-item-wrap").not(".load-more-qna").last().css("border-bottom","1px solid #e2e2e2")),a("html,body").animate({scrollTop:a(this).offset().top},1500)}))}(jQuery);