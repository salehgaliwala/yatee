!function(t){if("undefined"==typeof wcmp_vendor_shipping_script_data)return!1;var i=i||{build:function(){this.init(),this.bindEvents()},init:function(){this.modify_shipping_methods=".modify-shipping-methods",this.vendor_shipping_methods="#vendor-shipping-methods",this.shipping_by_zone_holder="#wcmp_settings_form_shipping_by_zone",this.shipping_zone_table=this.shipping_by_zone_holder+" .shipping-zone-table",this.shipping_zone_list=".shipping-zone-list",this.shipping_method_manage_form="#wcmp_shipping_method_manage_form",this.show_shipping_methods=this.vendor_shipping_methods+" .show-shipping-methods",this.add_shipping_methods=this.vendor_shipping_methods+" .add-shipping-method",this.edit_shipping_method=this.vendor_shipping_methods+" .edit-shipping-method",this.update_shipping_method=this.vendor_shipping_methods+" .update-shipping-method",this.delete_shipping_method=this.vendor_shipping_methods+" .delete-shipping-method",this.limit_zone_location=this.vendor_shipping_methods+" #limit_zone_location",this.method_status=this.vendor_shipping_methods+" .method-status",this.modal_close_link=".modal-close-link",this.modal_dialog=".wcmp-modal-dialog"},bindEvents:function(){t(this.modify_shipping_methods).on("click",this.modifyShippingMethods.bind(this)),t(document).on("zone_settings_loaded",this.zoneLoadedEvents.bind(this)),t(document.body).on("change",".wc-shipping-zone-method-selector select",this.onChangeShippingMethodSelector),t(document).delegate(this.shipping_zone_list,"click",this.goToShippingZones.bind(this)),t(document).delegate(this.show_shipping_methods,"click",this.showShippingMethods.bind(this)),t(document).delegate(this.add_shipping_methods,"click",this.addShippingMethod.bind(this)),t(document).delegate(this.edit_shipping_method,"click",this.editShippingMethod.bind(this)),t(document).delegate(this.update_shipping_method,"click",this.updateShippingMethod.bind(this)),t(document).delegate(this.delete_shipping_method,"click",this.deleteShippingMethod.bind(this)),t(document).delegate(this.limit_zone_location,"click",this.limitZoneLocation.bind(this)),t(document).delegate(this.method_status,"change",this.toggleShippingMethod.bind(this)),t(document).delegate(this.modal_close_link,"click",this.closeModal.bind(this))},modifyShippingMethods:function(i,e){var n=this;t("#wcmp_settings_form_shipping_by_zone").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),void 0!==i&&(i.preventDefault(),e=t(i.currentTarget).data("zoneId"));t.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:{action:"wcmp-get-shipping-methods-by-zone",zoneID:e,security:wcmp_vendor_shipping_script_data.nonce},success:function(i){t(n.vendor_shipping_methods).html(i.data.html).show(),t(n.shipping_zone_table).hide()},complete:function(){t("#wcmp_settings_form_shipping_by_zone").unblock(),t(document).trigger("zone_settings_loaded")}})},zoneLoadedEvents:function(t){this.limitZoneLocation(t)},goToShippingZones:function(i){i.preventDefault(),t(this.vendor_shipping_methods).html("").hide(),t(this.shipping_zone_table).show(),window.location.reload()},onChangeShippingMethodSelector:function(){var i=t(this).find("option:selected").data("description");t(this).parents(".wc-shipping-zone-method-selector").find(".wc-shipping-zone-method-description").html(""),t(this).parents(".wc-shipping-zone-method-selector").find(".wc-shipping-zone-method-description").html(i)},showShippingMethods:function(i){i.preventDefault(),t("#wcmp_shipping_method_add_container").show(),t("#wcmp_shipping_method_add_container "+this.modal_dialog).show()},addShippingMethod:function(i){i.preventDefault();var e=this,n=t("#zone_id").val(),o=t("#shipping_method option:selected").val();if(""==n);else if(""==o);else{var s={action:"wcmp-add-shipping-method",zoneID:n,method:o,security:wcmp_vendor_shipping_script_data.nonce};t("#wcmp_shipping_method_add_button").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});t.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:s,success:function(i){i.success&&(t("#wcmp_shipping_method_add_container").hide(),e.modifyShippingMethods(void 0,n))}})}},editShippingMethod:function(i){i.preventDefault(),t(".wcmp-zone-method-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e=t(i.currentTarget).parents(".edit_del_actions").data("instance_id"),n=t(i.currentTarget).parents(".edit_del_actions").data("method_id"),o=t(i.currentTarget).parents(".edit_del_actions").data("zone_id"),s={action:"wcmp-vendor-configure-shipping-method",zoneId:o,instanceId:e,methodId:n,security:wcmp_vendor_shipping_script_data.nonce};t.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:s,success:function(i){i&&(t(".wcmp-zone-method-content").unblock(),t("#wcmp_shipping_method_edit_container #method_id_selected").val(n),t("#wcmp_shipping_method_edit_container #instance_id_selected").val(e),t("#wcmp_shipping_method_edit_container #zone_id_selected").val(o),t("#shipping-form-fields").html(i.settings_html),t("#wcmp_shipping_method_edit_container").show())}})},updateShippingMethod:function(i){i.preventDefault();var e=this,n=t("#wcmp_shipping_method_edit_container #method_id_selected").val(),o=t("#wcmp_shipping_method_edit_container #instance_id_selected").val(),s=t("#zone_id").val(),p={action:"wcmp-update-shipping-method",zoneID:s,security:wcmp_vendor_shipping_script_data.nonce,args:{instance_id:o,zone_id:s,method_id:n,settings:t("#wcmp-vendor-edit-shipping-form").serializeArray()}};t("#wcmp_shipping_method_edit_button").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});t.ajax({method:"POST",url:wcmp_vendor_shipping_script_data.ajaxurl,data:p,success:function(t){t.success?e.modifyShippingMethods(void 0,s):alert(t.data)}})},deleteShippingMethod:function(i){i.preventDefault();var e=this;if(confirm(wcmp_vendor_shipping_script_data.i18n.deleteShippingMethodConfirmation)){var n=t(i.target).is(this.delete_shipping_method)?i.target:t(i.target).closest(this.delete_shipping_method),o=t(n).parents(".edit_del_actions").attr("data-instance_id"),s=t("#zone_id").val(),p=p={action:"wcmp-delete-shipping-method",zoneID:s,instance_id:o,security:wcmp_vendor_shipping_script_data.nonce};if(""==s);else if(""==o);else t.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:p,success:function(t){t.success?e.modifyShippingMethods(void 0,s):alert(resp.data)}})}},limitZoneLocation:function(i){t("#limit_zone_location").is(":checked")?(t(".hide_if_zone_not_limited").show(),t("#select_zone_states").select2()):t(".hide_if_zone_not_limited").hide()},toggleShippingMethod:function(i){i.preventDefault();var e=t(i.target).is(":checked"),n=t(i.target).val(),o=t("#zone_id").val(),s={action:"wcmp-toggle-shipping-method",zoneID:o,instance_id:n,checked:e,security:wcmp_vendor_shipping_script_data.nonce};if(""==o);else if(""==n);else{t(".wcmp-container").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});t.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:s,success:function(i){i.success?t(".wcmp-container").unblock():(t(".wcmp-container").unblock(),alert(i.data))}})}},closeModal:function(i){i.preventDefault();var e=t(i.target).parents(this.modal_dialog);e.length&&(e.hide(),t(this.modal_dialog).hide())}};function e(i){var e=wc_country_select_params.countries.replace(/&quot;/g,'"'),n=t.parseJSON(e),o=i.val();if(n[o])if(t.isEmptyObject(n[o]))i.parent().find(".wcmp_state_to_select").each((function(){$statebox=t(this),$statebox_id=$statebox.attr("id"),$statebox_name=$statebox.attr("name"),$statebox_val=$statebox.val(),null===$statebox_val&&($statebox_val=""),$statebox_dataname=$statebox.data("name"),$statebox.is("select")&&$statebox.replaceWith('<input type="text" name="'+$statebox_name+'" id="'+$statebox_id+'" data-name="'+$statebox_dataname+'" value="'+$statebox_val+'" class="wcmp-text wcmp_state_to_select multi_input_block_element" />')}));else{input_selected_state="";var s="",p=n[o];i.parent().find(".wcmp_state_to_select").each((function(){for(var i in $statebox=t(this),$statebox_id=$statebox.attr("id"),$statebox_name=$statebox.attr("name"),$statebox_val=$statebox.val(),null===$statebox_val&&($statebox_val=""),$statebox_dataname=$statebox.data("name"),p)if(p.hasOwnProperty(i)){if($statebox_val)if($statebox_val==i)var e='selected="selected"';else e="";s=s+'<option value="'+i+'"'+e+">"+p[i]+"</option>"}$statebox.is("select")&&$statebox.html('<option value="">'+wc_country_select_params.i18n_select_state_text+'</option><optgroup label="-------------------------------------"><option value="everywhere">'+wcmp_vendor_shipping_script_data.everywhere_else_option+'</option></optgroup><optgroup label="-------------------------------------">'+s+"</optgroup>"),$statebox.is("input")&&($statebox.replaceWith('<select name="'+$statebox_name+'" id="'+$statebox_id+'" data-name="'+$statebox_dataname+'" class="wcmp-select wcmp_state_to_select multi_input_block_element"></select>'),$statebox=t("#"+$statebox_id),$statebox.html('<option value="">'+wc_country_select_params.i18n_select_state_text+'</option><optgroup label="-------------------------------------"><option value="everywhere">'+wcmp_vendor_shipping_script_data.everywhere_else_option+'</option></optgroup><optgroup label="-------------------------------------">'+s+"</optgroup>")),$statebox.val($statebox_val)}))}else i.parent().find(".wcmp_state_to_select").each((function(){$statebox=t(this),$statebox_id=$statebox.attr("id"),$statebox_name=$statebox.attr("name"),$statebox_val=$statebox.val(),null===$statebox_val&&($statebox_val=""),$statebox_dataname=$statebox.data("name"),$statebox.is("select")&&$statebox.replaceWith('<input type="text" name="'+$statebox_name+'" id="'+$statebox_id+'" data-name="'+$statebox_dataname+'" value="'+$statebox_val+'" class="wcmp-text wcmp_state_to_select multi_input_block_element" />')}))}function n(i){var e=i.data("limit");void 0===e&&(e=-1),1==i.children(".multi_input_block").length&&i.children(".multi_input_block").children(".remove_multi_input_block").css("display","none"),i.children(".multi_input_block").length==e?i.find(".add_multi_input_block").hide():i.find(".add_multi_input_block").show(),i.children(".multi_input_block").each((function(){t(this)[0]!=i.children(".multi_input_block:last")[0]&&t(this).children(".add_multi_input_block").remove(),t(this).children(".add_multi_input_block").attr("title",wcmp_vendor_shipping_script_data.wcmp_multiblick_addnew_help),t(this).children(".remove_multi_input_block").attr("title",wcmp_vendor_shipping_script_data.wcmp_multiblick_remove_help)})),i.children(".multi_input_block").children(".add_multi_input_block").off("click").on("click",(function(){var n=i.attr("id"),s=i.data("name"),p=i.data("length");p++;var c=i.children(".multi_input_block:first").clone(!1);c.find("textarea,input:not(input[type=button],input[type=submit],input[type=checkbox],input[type=radio])").val(""),c.find("input[type=checkbox]").attr("checked",!1),c.find(".select2-container").remove(),c.find("select").select2(),c.find("select").select2("destroy"),c.children(".multi_input_block_element:not(.multi_input_holder)").each((function(){var i=t(this),e=i.data("name");i.hasClass("wcmp-wp-fields-uploader")||i.hasClass("wp-picker-container")||(i.attr("name",s+"["+p+"]["+e+"]"),i.attr("id",n+"_"+e+"_"+p))})),c.children(".multi_input_holder").each((function(){o(t(this),n,s,p)})),c.children(".remove_multi_input_block").off("click").on("click",(function(){if(confirm(wcmp_vendor_shipping_script_data.multiblock_delete_confirm)){var i=t(this).parent().parent(),n=i.children(".multi_input_block").children(".add_multi_input_block").clone(!0);t(this).parent().remove(),i.children(".multi_input_block").children(".add_multi_input_block").remove(),i.children(".multi_input_block:last").append(n),i.children(".multi_input_block").length==e?i.find(".add_multi_input_block").hide():i.find(".add_multi_input_block").show(),1==i.children(".multi_input_block").length&&i.children(".multi_input_block").children(".remove_multi_input_block").css("display","none")}})),c.children(".add_multi_input_block").remove(),i.append(c),i.children(".multi_input_block:last").append(t(this)),i.children(".multi_input_block").length>1&&i.children(".multi_input_block").children(".remove_multi_input_block").css("display","block"),i.children(".multi_input_block").length==e?i.find(".add_multi_input_block").hide():i.find(".add_multi_input_block").show(),i.data("length",p),i.find(".field_type_options").each((function(){t(this).off("change").on("change",(function(){t(this).parent().find(".field_type_select_options").hide(),t(this).parent().find(".field_type_html_options").hide(),"select"==t(this).val()||"mselect"==t(this).val()||"dropdown"==t(this).val()?t(this).parent().find(".field_type_select_options").show():"html"==t(this).val()&&t(this).parent().find(".field_type_html_options").show()})).change()})),i.find(".custom_field_is_group").each((function(){t(this).change((function(){t(this).is(":checked")?t(this).parent().find(".custom_field_is_group_name").css("visibility","visible"):t(this).parent().find(".custom_field_is_group_name").css("visibility","hidden")})).change()}))})),i.hasClass("multi_input_block_element"),i.children(".multi_input_block").children(".multi_input_holder").length,i.children(".multi_input_block").children(".remove_multi_input_block").off("click").on("click",(function(){if(confirm(wcmp_vendor_shipping_script_data.multiblock_delete_confirm)){var i=t(this).parent().parent(),n=i.children(".multi_input_block").children(".add_multi_input_block").clone(!0);t(this).parent().remove(),i.children(".multi_input_block").children(".add_multi_input_block").remove(),i.children(".multi_input_block:last").append(n),1==i.children(".multi_input_block").length&&i.children(".multi_input_block").children(".remove_multi_input_block").css("display","none"),i.children(".multi_input_block").length==e?i.find(".add_multi_input_block").hide():i.find(".add_multi_input_block").show()}})),i.find(".field_type_options").each((function(){t(this).off("change").on("change",(function(){t(this).parent().find(".field_type_select_options").hide(),t(this).parent().find(".field_type_html_options").hide(),"select"==t(this).val()||"mselect"==t(this).val()||"dropdown"==t(this).val()?t(this).parent().find(".field_type_select_options").show():"html"==t(this).val()&&t(this).parent().find(".field_type_html_options").show()})).change()})),i.find(".custom_field_is_group").each((function(){t(this).change((function(){t(this).is(":checked")?t(this).parent().find(".custom_field_is_group_name").css("visibility","visible"):t(this).parent().find(".custom_field_is_group_name").css("visibility","hidden")})).change()}))}function o(i,e,s,p){i.children(".multi_input_block:not(:last)").remove();for(var c=i.attr("id"),_=(c=c.replace(e+"_","")).split("_"),d="",a=0;a<_.length-1;a++)""!=d&&(d+="_"),d+=_[a];i.attr("data-name",s+"["+p+"]["+d+"]"),i.attr("id",e+"_"+d+"_"+p);i.children(".multi_input_block").children(".multi_input_block_element:not(.multi_input_holder)").each((function(){var i=t(this),n=i.data("name");if(i.hasClass("wcmp-wp-fields-uploader"));else{var o=i.attr("multiple");void 0!==o&&!1!==o?i.attr("name",s+"["+p+"]["+d+"][0]["+n+"][]"):i.attr("name",s+"["+p+"]["+d+"][0]["+n+"]"),i.attr("id",e+"_"+d+"_"+p+"_"+n+"_0")}})),n(i),i.children(".multi_input_block").children(".multi_input_holder").length>0&&i.children(".multi_input_block").css("padding-bottom","40px"),i.children(".multi_input_block").children(".multi_input_holder").each((function(){o(t(this),e+"_"+d+"_0",s+"["+p+"]["+d+"]",0)}))}t(i.build.bind(i)),t("#shipping-options").change((function(){var i=t(this).val();"distance_by_shipping"==i?(t("#wcmp-vendor-shipping-by-distance-section").show(),t("#wcmp-vendor-shipping-by-zone-section").hide(),t("#wcmp-vendor-shipping-by-country-section").hide()):"distance_by_zone"==i?(t("#wcmp-vendor-shipping-by-distance-section").hide(),t("#wcmp-vendor-shipping-by-zone-section").show(),t("#wcmp-vendor-shipping-by-country-section").hide()):"shipping_by_country"==i&&(t("#wcmp-vendor-shipping-by-distance-section").hide(),t("#wcmp-vendor-shipping-by-country-section").show(),t("#wcmp-vendor-shipping-by-zone-section").hide())})),"distance_by_shipping"==t("#shipping-options").val()?(t("#wcmp-vendor-shipping-by-distance-section").show(),t("#wcmp-vendor-shipping-by-zone-section").hide(),t("#wcmp-vendor-shipping-by-country-section").hide()):"distance_by_zone"==t("#shipping-options").val()?(t("#wcmp-vendor-shipping-by-distance-section").hide(),t("#wcmp-vendor-shipping-by-zone-section").show(),t("#wcmp-vendor-shipping-by-country-section").hide()):"shipping_by_country"==t("#shipping-options").val()&&(t("#wcmp-vendor-shipping-by-distance-section").hide(),t("#wcmp-vendor-shipping-by-zone-section").hide(),t("#wcmp-vendor-shipping-by-country-section").show()),t(".wcmp_country_to_select").select2(),t(".wcmp-select").select2(),t(".wcmp_country_to_select").each((function(){t(this).change((function(){e(t(this))})).change()})),setTimeout((function(){t("#wcmp_shipping_rates").children(".multi_input_block").children(".add_multi_input_block").click((function(){t("#wcmp_shipping_rates").children(".multi_input_block:last").find(".wcmp_country_to_select").select2(),t("#wcmp_shipping_rates").children(".multi_input_block:last").find(".wcmp_country_to_select").change((function(){e(t(this))})).change()}))}),2e3),t(".multi_input_holder").each((function(){n(t(this))}))}(jQuery);