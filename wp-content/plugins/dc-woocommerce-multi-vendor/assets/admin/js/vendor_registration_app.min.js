var app=angular.module("vendor_registration",["ui.sortable"]);app.service("vendor_registration_service",(function(){var e=[];if(""!==vendor_registration_param.form_data){angular.forEach(vendor_registration_param.form_data,(function(e,a){vendor_registration_param.form_data[a].partial=e.partial.split("/")[e.partial.split("/").length-1]}));e=vendor_registration_param.form_data}return{getField:function(){return e},setField:function(a){e=a}}})),app.controller("postbox_menu",["$scope","vendor_registration_service",function(e,a){e.postboxClass="",e.vendorStoreFieldClass="";var t=a.getField();e.addFormField=function(e,r,l){l.preventDefault();var i=t.length;switch(e){case"selectbox":t.push({id:i,type:e,selecttype:"radio",label:r,hidden:!1,partial:e+".html",required:!1,options:[{value:"option1",label:"Option 1",selected:!1},{value:"option2",label:"Option 2",selected:!0},{value:"option3",label:"Option 3",selected:!1}],cssClass:""});break;case"email":case"vendor_address_1":case"vendor_address_2":case"vendor_phone":case"vendor_country":case"vendor_city":case"vendor_postcode":case"vendor_paypal_email":default:t.push({id:i,type:e,label:r,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"textarea":t.push({id:i,type:e,label:r,hidden:!1,partial:e+".html",defaultValue:"",limit:"",required:!1,cssClass:"",tip_description:""});break;case"checkbox":t.push({id:i,type:e,label:r,hidden:!1,partial:e+".html",defaultValue:"unchecked",required:!1,cssClass:""});break;case"recaptcha":t.push({id:i,type:e,label:r,recaptchatype:"v3",hidden:!1,partial:e+".html",script:"",required:!1});break;case"file":t.push({id:i,type:e,label:r,hidden:!1,partial:e+".html",fileSize:"",fileType:[{value:"application/pdf",label:"PDF",selected:!1},{value:"image/jpeg",label:"JPEG",selected:!1},{value:"image/png",label:"PNG",selected:!1},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"DOC",selected:!1},{value:"application/vnd.ms-excel",label:"xls",selected:!1}],required:!1,muliple:!1,cssClass:""});break;case"separator":t.push({id:i,type:e,label:r,hidden:!1,partial:e+".html",cssClass:""});break;case"vendor_description":t.push({id:i,type:e,label:r,hidden:!1,partial:e+".html",defaultValue:"",limit:"",required:!1,cssClass:""});break;case"vendor_state":jQuery.inArray("vendor_country",jQuery.map(t,(function(e){return e.type})))>-1?t.push({id:i,type:e,label:r,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""}):alert(vendor_registration_param.lang.need_country_dependancy)}a.setField(t)},e.togglePostbox=function(){""===e.postboxClass?e.postboxClass="closed":e.postboxClass=""},e.togglevendorStoreField=function(){""===e.vendorStoreFieldClass?e.vendorStoreFieldClass="closed":e.vendorStoreFieldClass=""}}]),app.controller("postbox_content",["$scope","$http","vendor_registration_service",function(e,a,t){var r=t.getField();e.fields=r,e.partialUrl=vendor_registration_param.partials,e.showSaveSpinner=!1,e.togglePostboxField=function(a){e.fields[a].hidden?e.fields[a].hidden=!1:e.fields[a].hidden=!0},e.removeFormField=function(e,a){a.preventDefault(),r.splice(e,1),t.setField(r)},e.addSelectBoxOption=function(a,t){t.preventDefault();var r=e.fields[a].options.length+1;e.fields[a].options.push({value:"option"+r,label:"Option "+r,selected:!1})},e.removeSelectboxOption=function(a,t,r){r.preventDefault(),e.fields[a].options.splice(t,1)},e.fieldSortableOptions={stop:function(e,a){}},e.listOnchange=function(a,t){console.log(e.fields[a].options),angular.forEach(e.fields[a].options,(function(r,l){l!==t&&(e.fields[a].options[l].selected=!1)}))},e.saveFormData=function(){e.showSaveSpinner=!0;var t=jQuery.param({action:"wcmp_save_vendor_registration_form",form_data:JSON.stringify(e.fields),security:vendor_registration_param.registration_nonce});a.post(vendor_registration_param.ajax_url,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success((function(a,t,r,l){e.showSaveSpinner=!1})).error((function(a,t,r,l){console.log(a),e.showSaveSpinner=!1}))}}]);