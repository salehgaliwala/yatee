(function(b){b(document).ready(function(){function g(){var c=wceb.get.childrenIds();b('.cart[data-type="variable"]').each(function(){var a=b(this),e=a.find(".wceb-price-format"),f=a.data("product_variations");b.each(f,function(h,k){"undefined"!==typeof c[k.variation_id]&&(current_variation=f[h],a.trigger("wceb_variation_found",[current_variation,a]),current_variation.is_bookable?e.html(wceb.priceHtml).show():e.hide())})});var d=$reset_dates.attr("data-ids");""!==d?(d=JSON.parse(d),!0===l(Object.keys(c),
Object.keys(d))?action="init":b.each(c,function(a,e){if(d[a]!==e)return action="update",!1;action=!1;return!0})):action="init";$reset_dates.attr("data-ids",JSON.stringify(c));"init"===action?(b(".wceb_picker_wrap").find(".wceb_error").remove(),wceb.pickers.reset(),wceb.clearBookingSession()):"update"===action&&("two"===wceb.dateFormat&&wceb.checkIf.datesAreSet()?wceb.setPrice():"one"===wceb.dateFormat&&wceb.checkIf.dateIsSet("start")&&wceb.picker.set());b(".single_add_to_cart_button").addClass("disabled dates-selection-needed")}
function l(c,d){c.sort();d.sort();if(c.length!=d.length)return!0;for(var a=0;a<c.length;a++)if(c[a]!=d[a])return!0;return!1}wceb.dateFormat=wceb_object.booking_dates;wceb.firstDate=parseInt(wceb_object.first_date);wceb.bookingMin=parseInt(wceb_object.min);wceb.bookingMax=""===wceb_object.max?"":parseInt(wceb_object.max);wceb.bookingDuration=parseInt(wceb_object.booking_duration);wceb.priceHtml=wceb_object.prices_html;$bookingPrice=b(".booking_price");$body=b("body");$bundle_wrap=b(".bundle_form .bundle_data");
$bundle_price=$bundle_wrap.find(".bundle_price");$picker_wrap=b(".wceb_picker_wrap");$reset_dates=$picker_wrap.find("a.reset_dates");$bundle_wrap.on("woocommerce-product-bundle-show",function(c){$picker_wrap.slideDown(200);g();c.stopPropagation()});$bundle_wrap.on("woocommerce-product-bundle-hide",function(){$picker_wrap.hide()});$bundle_wrap.on("woocommerce-product-bundle-updated-totals",function(c,d){if(!("two"===wceb.dateFormat&&wceb.checkIf.datesAreSet()||"one"===wceb.dateFormat&&wceb.checkIf.dateIsSet("start"))){var a=
d.api.get_bundle_totals();totalBundlePrice=a.price;totalBundleRegularPrice=a.regular_price;$bookingPrice.attr("data-booking_price",totalBundlePrice);$bookingPrice.attr("data-booking_regular_price",totalBundleRegularPrice);var e=wceb.get.additionalCosts();$bundle_price.remove();var f=b(".cart").find('input[name="quantity"]').length?parseFloat(b(".cart").find('input[name="quantity"]').val()):1;a=parseFloat((totalBundlePrice+e)*f);e=parseFloat((totalBundleRegularPrice+e)*f);f='<span class="woocommerce-Price-amount amount">'+
wceb.formatPrice(a)+wceb_object.price_suffix+"</span>";a!==e&&(f='<del><span class="woocommerce-Price-amount amount">'+wceb.formatPrice(e)+wceb_object.price_suffix+'</span></del> <ins><span class="woocommerce-Price-amount amount">'+wceb.formatPrice(a)+wceb_object.price_suffix+"</span></ins>");$bookingPrice.find(".price").html(f)}});$body.on("reset_image",".variations_form",function(c,d){b(this).find(".wceb-price-format").hide()})})})(jQuery);